	ORG	27200
SMANJ	POP	BC
	POP	HL
	INC	HL
	INC	HL
	INC	HL
	PUSH	HL
	PUSH	BC
	RET
VUK1	LD	DE,#02FF
ZVK	LD	A,E
	XOR	D
	AND	248
ZX	LD	H,0
	OR	H
	CALL	PAVZA
	OUT	(254),A
	DEC	DE
	LD	A,D
	OR	E
	JP	NZ,ZVK
	RET
PAVZA	RET
CLS	LD	B,8
SHIT	LD	HL,16384
	LD	DE,3072
SUPE	SRL	(HL)
	INC	HL
	SLA	(HL)
	INC	HL
	DEC	DE
	LD	A,D
	OR	E
	JP	NZ,SUPE 
	DJNZ	SHIT
	RET
MENIEK	LD	DE,24000
	PUSH	HL
	PUSH	DE
	CALL	DEF_LO
	POP	HL
Z1	LD	C,6
BILJA	LD	B,8
BILJ	PUSH	BC
Z2	LD	C,6
	LD	B,0
	LDIR
	INC	D
	LD	A,E
Z3	SUB	6
	LD	E,A
	POP	BC
	DJNZ	BILJ
	DEC	C
	EX	DE,HL
	POP	HL
	RET	Z
	INC	H
	PUSH	HL
	PUSH	DE
	CALL	DEF_LO
	POP	HL
	JP	BILJA
DEF_LO	LD	A,H
	AND	#F8
	ADD	A,#40
	LD	D,A
	LD	A,H
	AND	#07
	RRCA
	RRCA
	RRCA
	ADD	A,L
	LD	E,A
	RET
ATT_FI	LD	D,H
	LD	E,L
	LD	H,E
	LD	L,D
	LD	C,H
	LD	DE,22528
	LD	H,E
	ADD	HL,HL
	ADD	HL,HL
	ADD	HL,HL
	ADD	HL,HL
	ADD	HL,HL
	LD	B,E
	ADD	HL,BC
	ADD	HL,DE
	LD	D,E
VIS	LD	C,0
SIR	LD	B,0
	LD	A,32
	SUB	B
	LD	E,A
L1	PUSH	BC
L2	LD	(HL),0
	INC	HL
	DJNZ	L2
	ADD	HL,DE
	POP	BC
	DEC	C
	JP	NZ,L1
	RET
SLOEKR	CALL	DEF_LO
	LD	H,B
	LD	L,C
	LD	B,8
GLJ	LD	A,(HL)
	LD	(DE),A
	INC	D
	INC	HL
	DJNZ	GLJ
	RET
ISPISV	LD	DE,(NEXTSL)
	LD	A,16
	ADD	A,E
	LD	(NEXTSL),A
	LD	C,8
SKR	LD	B,8
ROT	LD	A,(HL)
MASKE	AND	128
	JP	NZ,PLOT2
	INC	E
	INC	E
TOR	LD	A,(MASKE+1)
	RRCA
	LD	(MASKE+1),A
	DJNZ	ROT
	INC	HL
	INC	D
	INC	D
	LD	A,E
	SUB	16
	LD	E,A
	DEC	C
	JP	NZ,SKR
	RET
PLOT2	PUSH	HL
	CALL	PLOT
	INC	E
	CALL	PLOT
	INC	E
	POP	HL
	JP	TOR
PIX_AD	LD	H,254
	LD	L,D
	LD	H,(HL)
	LD	A,E
	RLCA
	RLCA
	RLCA
	XOR	D
	AND	199
	XOR	D
	RLCA
	RLCA
	LD	L,A
	RET
CHECK	LD	DE,ADRTAB
	LD	HL,COUNT
	LD	A,(HL)
	CP	5
	JP	Z,CHCK2
	INC	(HL)
STZ	ADD	A,A
	LD	H,0
	LD	L,A
	ADD	HL,DE
	LD	E,(HL)
	INC	HL
	LD	D,(HL)
	LD	HL,(NEHTSL)
	LD	A,2
	CALL	POSTAV
	CALL	MENIEK+3
	XOR	A
	LD	(BROJAC),A
	RET
ADRTAB	DEFW	24720,24752,24784
	DEFW	24816,24848
CHCK2	LD	HL,COUNT1
	DEC	(HL)
	JP	Z,ZST
TSZ	LD	A,(HL)
	JP	STZ
ZST	XOR	A
	LD	(COUNT),A
	LD	A,5
	LD	(COUNT1),A
	LD	HL,COUNT
	JP	TSZ
TESTKE	LD	A,(KEYBOA)
	AND	A
	JP	Z,Z80
	CP	1
	JP	Z,Z81
	CP	2
	JP	Z,Z82
	LD	B,59
	CALL	STAVI
	LD	HL,CUR_TX
	LD	DE,#1007
	CALL	TEXT
	LD	HL,SP17TX
	LD	DE,#1209
	CALL	TEXT
	LD	HL,SP17TX
	LD	DE,#1309
	CALL	TEXT
	RET
Z80	LD	B,56
	CALL	STAVI
	LD	HL,KEY_TX
	LD	DE,#1007
	CALL	TEXT
	LD	A,60
	LD	(L2+1),A
	LD	HL,#1209
	CALL	ATT_FI
	LD	HL,STR_TX
	LD	DE,#1209
	CALL	TEXT
	LD	A,57
	LD	(L2+1),A
	LD	HL,#1309
	CALL	ATT_FI
	LD	HL,UPD
	LD	E,(HL)
	CALL	PROV
	CALL	#031E
	CALL	RACUN
	LD	B,H
	LD	C,L
	LD	HL,#1309
	CALL	SLOEKR  
	LD	HL,DOWD
	LD	E,(HL)
	CALL	PROV
	CALL	#031E
	CALL	RACUN
	LD	B,H
	LD	C,L
	LD	HL,#130C
	CALL	SLOEKR
	LD	HL,LEFD
	LD	E,(HL)
	CALL	PROV
	CALL	#031E
	CALL	RACUN
	LD	B,H
	LD	C,L
	LD	HL,#130F
	CALL	SLOEKR
	LD	HL,RIGD
	LD	E,(HL)
	CALL	PROV
	CALL	#031E
	CALL	RACUN
	LD	B,H
	LD	C,L
	LD	HL,#1312
	CALL	SLOEKR
	LD	HL,FIRD
	LD	E,(HL)
	CALL	PROV
	CALL	#031E
	CALL	RACUN
	LD	B,H
	LD	C,L
	LD	HL,#1315
	CALL	SLOEKR
	RET
PROV	LD	A,E
	CP	#27
	JP	Z,CAPS
	CP	#18
	JP	Z,SYMB
	CP	#20
	JP	Z,SPC
	CP	#21
	JP	Z,ENT
	RET
CAPS	LD	A,35
	CALL	SMANJ
	RET
SYMB	LD	A,36
	CALL	SMANJ
	RET
SPC	LD	A,37   
	CALL	SMANJ
	RET
ENT	LD	A,42   
	CALL	SMANJ
	RET
Z81	LD	B,58
	CALL	STAVI
	LD	HL,KEM_TX
	LD	DE,#1007
	CALL	TEXT
	LD	HL,SP17TX
	LD	DE,#1209
	CALL	TEXT
	LD	DE,#1309
	LD	HL,SP17TX
	CALL	TEXT
	LD	A,2
	LD	(VIS+1),A
	LD	A,17
	LD	(SIR+1),A
	LD	A,56
	LD	(L2+1),A
	LD	HL,#1207
	CALL	ATT_FI
	RET
Z82	LD	B,60
	CALL	STAVI
	LD	HL,SIN_TX
	LD	DE,#1007
	CALL	TEXT
	RET
GADGET	LD	A,1
	LD	(VIS+1),A
	LD	(SIR+1),A
	LD	A,60
	LD	(L2+1),A
	LD	HL,#1106
	CALL	ATT_FI
	LD	A,57
	LD	(L2+1),A
	LD	HL,#1206
	CALL	ATT_FI
	LD	A,58
	LD	(L2+1),A
	LD	HL,#1406
	CALL	ATT_FI
	LD	A,91    
	CALL	RACUN
	LD	B,H
	LD	C,L
	LD	HL,#1106
	CALL	SLOEKR
	LD	A,92    
	CALL	RACUN
	LD	B,H
	LD	C,L
	LD	HL,#1206
	CALL	SLOEKR
	LD	A,96    
	CALL	RACUN
	LD	B,H
	LD	C,L
	LD	HL,#1406
	CALL	SLOEKR
	RET
STAVI	LD	A,1
	LD	(VIS+1),A
	LD	A,17
	LD	(SIR+1),A
	LD	A,B
	LD	(L2+1),A
	LD	HL,#1007
	CALL	ATT_FI
	RET
TEXT	LD	A,(HL)
	AND	A
	RET	Z
	PUSH	DE
	PUSH	HL
	CALL	RACUN
	EX	DE,HL
	LD	B,D
	LD	C,E
	CALL	SLOEKR
	POP	HL
	INC	HL
	POP	DE
	INC	E
	JP	TEXT
PLOT	LD	H,254
	LD	L,D
	LD	H,(HL)
	LD	A,E
	RLCA
	RLCA
	RLCA
	LD	L,A
	AND	56
	XOR	254
	LD	(TLAB+1),A
	LD	A,L
	XOR	D
	AND	199
	XOR	D
	RLCA
	RLCA
	LD	L,A
TLAB	SET	0,(HL)
RET
THE	LD	(HL),1
	POP	DE
	RET
WAITKY	PUSH	HL
	CALL	ZEL
WERY	CALL	#028E
	JP	NZ,NIC
	CALL	#031E
	JP	NC,NIC
	CP	65
	JP	C,NIC
	LD	HL,BRSLOV
	INC	(HL)
	POP	HL
	PUSH	HL
	LD	DE,(BRSLOV)
	LD	D,0
	ADD	HL,DE
	CP	(HL)
	JP	Z,KRAJ
	LD	HL,FLAGS4
	SET	7,(HL)
KRAJ	EX	AF,AF'
	CALL	BRIS
	CALL	CRV
	EX	AF,AF'
	CALL	RACUN
	CALL	ISPISV
	CALL	ZVUK1
	LD	HL,BRSLOV
	LD	A,6
	CP	(HL)
	JP	Z,AREYOU
	CALL	PAUZA
	CALL	NA
NIC	SCF
	LD	HL,BROJAC
	INC	(HL)
	LD	A,(HL)
	CP	110
	CALL	Z,CHECK
	JP	WERY
NA	LD	HL,NEHTSL
	LD	A,(HL)
	ADD	A,2
	LD	(HL),A
	CALL	ZEL
	RET
BRIS	LD	DE,PRAZNO
	LD	HL,(NEHTSL)
	LD	A,2
	CALL	POSTAV
	CALL	MENIEK+3
	RET
CRV	LD	HL,(NEHTSL)
	LD	A,2
	LD	(VIS+1),A
	LD	(SIR+1),A
ZE	LD	A,2
	LD	(L2+1),A
	CALL	ATT_FI
	RET
ZEL	LD	A,4
	LD	(ZE+1),A
	CALL	CRV
ZE23	LD	A,2
	LD	(ZE+1),A
	RET
AREYOU	LD	A,1
	LD	(VIS+1),A
	LD	A,19
	LD	(SIR+1),A
	LD	C,0
	LD	B,6
LO1	LD	HL,#100D
	LD	A,C
	LD	(L2+1),A
	INC	C
	PUSH	BC
	CALL	PAUZA
	CALL	ATT_FI
	POP	BC
	DJNZ	LO1
YOUARE	CALL	#028E
	LD	A,E
	CP	255
	JP	Z,YOUARE
	CP	2
	POP	HL
	RET	Z
	CP	8
	PUSH	HL
	JP	NZ,YOUARE
	XOR	A
	LD	(BRSLOV),A
	LD	HL,#5050
	LD	(NEXTSL),HL
	LD	HL,#0A0A
	LD	(NEHTSL),HL
	LD	DE,PRAZNO
	LD	A,2
	LD	(Z1+1),A
	LD	A,12
	LD	(Z2+1),A
	LD	(Z3+1),A
	CALL	MENIEK+3  
	LD	HL,FLAGS4
	RES	7,(HL)
	CALL	ZEL
	LD	HL,VIS+1
	LD	(HL),1
	LD	HL,SIR+1
	LD	(HL),19
	LD	C,4
	LD	B,5
LOOPY	LD	HL,#100D
	LD	A,C
	LD	(L2+1),A
	DEC	C
	PUSH	BC
	CALL	PAUZA
	CALL	ATT_FI
	POP	BC
	DJNZ	LOOPY
	JP	WERY
PAUZA	LD	B,5  
PAU	HALT
	DJNZ	PAU
	RET
POSTAV	LD	(Z1+1),A
	LD	(Z2+1),A
	LD	(Z3+1),A
	RET
CUVAJ	DEFS	2
DATA	DEFS	2
BRSLOV	DEFS	1
FLAGS4	DEFS	1

UPD	DEFB	#26
DOWD	DEFB	#1F
LEFD	DEFB	#11
RIGD	DEFB	#19
FIRD	DEFB	#20
KEM_TX	DEFM	"KEMPSTON JOYSTICK"
	DEFB	0
PRAZNO	EQU	23297
SIN_TX	DEFM	"SINCLAIR JOYSTICK"
	DEFB	0
COUNT	DEFB	1
BROJAC	DEFB	1
KEYBOA	DEFB	1
CUR_TX	DEFM	"CURSOR JOYSTICK  "
	DEFB	0
NEXTSL	DEFS	2
NEHTSL	DEFS	2
COUNT1	DEFS	1
STR_TX	DEFB	91,32,32,92,32,32,94,32,32,93,32,32,95,0
RACUN	LD	BC,31000
	LD	L,A
	LD	H,0
	ADD	HL,HL
	ADD	HL,HL
	ADD	HL,HL
	ADD	HL,BC
	RET
KEY_TX	DEFM	"    KEYBOARD     "
	DEFB	0
COME	CALL	ATT_LO
	CALL	BOJ_EK
	RET
ATT_LO	LD	A,B
	SRA	A
	SRA	A
	SRA	A
	ADD	A,#58
	LD	D,A
	LD	A,B
	AND	#7
	RRCA
	RRCA
	RRCA
	ADD	A,C
	LD	E,A
	RET
	ENT	$
	CALL	TAB
	CALL	CLS
	LD	DE,22529
	LD	HL,22528
	LD	BC,768
	XOR	A
	OUT	(254),A
	LD	(HL),A
	LDIR
	LD	DE,#0502
	LD	HL,SEC_TX
	CALL	TEXT
	LD	A,1
	LD	(VIS+1),A
	LD	A,14
	LD	(SIR+1),A
	LD	C,0
	LD	B,7
LOOP	LD	HL,#0502
	LD	A,C
	LD	(L2+1),A
	INC	C
	PUSH	BC
	CALL	ATT_FI
	CALL	PAUZA
	POP	BC
	DJNZ	LOOP
	LD	HL,#0A0A
	LD	(NEHTSL),HL
	LD	HL,#5050
	LD	(NEXTSL),HL
	LD	HL,ARE_TX
	LD	DE,#100D
	CALL	TEXT
	XOR	A
	LD	(BRSLOV),A
	LD	(COUNT),A
	LD	(BROJAC),A
	LD	(KEYBOA),A
	LD	(BR101),A
	LD	(BR102),A
	LD	(FLAGS4),A
	LD	(GADG),A
	LD	A,1
	LD	(SHIP),A
	LD	(LEVEL),A
	LD	(SLEVEL),A
	LD	HL,UPD
	CALL	PREM
	LD	A,5
	LD	(COUNT1),A
	LD	HL,TAM_CD-1
	CALL	WAITKY
	CALL	CLS
	LD	A,(FLAGS4)
	AND	128
	JP	Z,DALJE
	RST	0
DALJE	LD	HL,22528
	LD	DE,22529
	LD	BC,768
	LD	(HL),56
	LD	A,7
	OUT	(254),A
	LDIR
	LD	HL,#1100
	LD	DE,37048
	LD	A,4
	CALL	POSTAV
	CALL	MENIEK+3
	LD	HL,#8008
	LD	(COORS),HL
	LD	HL,35000
	LD	(DATA),HL
	LD	HL,36024
	LD	(MASK),HL
	SBC	HL,HL
	LD	(CUVAJ),HL
	LD	A,3
	LD	(FOR1+1),A
	LD	A,31
	LD	(FOR2+1),A
	CALL	SPRIT3
	LD	A,2
	LD	(FOR1+1),A
	LD	A,23
	LD	(FOR2+1),A
	LD	DE,#101B
	LD	HL,LEV_TX
	CALL	TEXT
	LD	HL,#88E0
	LD	(NEXTSL),HL
	LD	A,49
	CALL	RACUN
	CALL	ISPISV
	LD	A,2
	LD	(VIS+1),A
	LD	(SIR+1),A
	LD	A,59
	LD	(L2+1),A
	LD	HL,#111C
	CALL	ATT_FI
	LD	DE,16384
	LD	HL,24880
	LD	BC,2048
	LDIR
	LD	DE,22528
	LD	HL,26928
	LD	BC,256
	LDIR
	LD	A,1
	LD	(VIS+1),A
	LD	A,19
	LD	(SIR+1),A
	LD	HL,#160C
	LD	A,63
	LD	(L2+1),A
	CALL	ATT_FI
	LD	HL,ARE_TX
	LD	DE,#160C
	CALL	TEXT
	LD	A,6
	CALL	POSTAV
	LD	HL,#0902
	CALL	MENIEK
	LD	HL,#0909
	CALL	MENIEK
	LD	HL,#0911
	CALL	MENIEK
	LD	HL,#0918
	CALL	MENIEK
	LD	A,3
	CALL	POSTAV
	LD	HL,#0A04
	LD	DE,24288
	CALL	MENIEK+3
	LD	HL,#0A0B
	LD	DE,24360
	CALL	MENIEK+3
	LD	HL,#0A13
	LD	DE,24432
	CALL	MENIEK+3
	LD	HL,#0A1A
	LD	DE,24504
	CALL	MENIEK+3
	LD	BC,#0903
	CALL	COME
	LD	BC,#090A
	CALL	COME
	LD	BC,#0912
	CALL	COME
	LD	BC,#0919
	CALL	COME
	CALL	TESTKE
	CALL	GADGET
	CALL	URIDI
	RET
BOJ_EK	LD	HL,TABLIC
SZE	LD	C,5
	LD	B,0
	LDIR
	LD	A,E
	ADD	A,27
	LD	E,A
	LD	A,(HL)
	AND	A
	JP	NZ,SZE
	RET
TABLIC	DEFB	56,96,96,96,56
	DEFB	32,120,120,120,96
	DEFB	32,120,120,120,96
	DEFB	32,120,120,120,96
	DEFB	56,32,32,32,56,0
ARE_TX	DEFM	"ARE YOU SURE (Y/N)?"
	DEFB	0
SEC_TX	DEFM	"SECURITY CODE:"
	DEFB	0
TAM_CD	DEFM	"TAMAMA"
SPRIT3	LD	HL,(DATA)
	LD	DE,(MASK)
	PUSH	DE
	PUSH	HL
	EXX
	LD	BC,(CUVAJ)
	LD	DE,(COORS)
SEPR	LD	H,#FE
	LD	L,D
	LD	H,(HL)
	LD	A,E
	RLCA
	RLCA
	RLCA
	XOR	D
	AND	199
	XOR	D
	RLCA
	RLCA
	LD	L,A
	LD	A,E
	AND	7
	EXX
	LD	D,A
	LD	A,8
	SUB	D
	EXX
	EX	AF,AF'
	LD	A,(HL)
	LD	(BC),A
	INC	BC
	EXX
LOR	POP	HL
	POP	DE
	LD	C,(HL)
	XOR	A
	CP	C
	JR	Z,SPOTI
	EX	AF,AF'
	LD	B,A
	EX	AF,AF'
SPOTI	LD	A,(DE)
	PUSH	DE
	PUSH	HL
	LD	HL,#FF00
	JR	Z,SPOT
ROL	SCF
	RLA
	RL	H
	AND	A
	RL	C
	RL	L
	DJNZ	ROL
SPOT	PUSH	AF
	EXX
	LD	A,(HL)
	EXX
	AND	H
	OR	L
	EXX
	LD	(HL),A
	INC	HL
	LD	A,(HL)
	LD	(BC),A
	INC	BC
	EXX
	POP	HL
	AND	H
	OR	C
	EXX
	LD	(HL),A
	EXX
	POP	HL
	POP	DE
SPORT	INC	HL
	INC	DE
	PUSH	DE
	PUSH	HL
	LD	HL,BR101
FOR1	LD	A,2
	CP	(HL)
	JR	Z,END
	INC	(HL)
	JP	LOR
END	LD	HL,BR101
	LD	(HL),0
	LD	HL,BR102
FOR2	LD	A,23
	CP	(HL)
	JR	Z,THI
	INC	(HL)
	EXX
	INC	D
	JP	SEPR
THI	POP	HL
	POP	DE
	LD	HL,BR102
	LD	(HL),0
	EXX
	LD	HL,10072
	EXX
	RET
TAB	LD	HL,#FE00
TLOOP	LD	A,L
	AND	A
	RRA
	SCF
	RRA
	AND	A
	RRA
	XOR	L
	AND	248
	XOR	L
	LD	(HL),A
	INC	L
	LD	A,L
	CP	192
	JR	NZ,TLOOP
	RET
COORS	DEFS	2
BR101	DEFS	1
BR102	DEFS	1
PONOVO	CALL	MORAS
URIDI	LD	HL,#5779
	LD	(COORS),HL
	LD	HL,24648
	LD	(DATA),HL
	LD	HL,24576
	LD	(MASK),HL
	LD	HL,50000
	LD	(CUVAJ),HL
	CALL	SPRIT3
	LD	A,7
	LD	(ZX+1),A
	LD	A,(KEYBOA)
	ADD	A,A
	LD	HL,KEYTAB
	LD	D,0
	LD	E,A
	ADD	HL,DE
	LD	E,(HL)
	INC	HL
	LD	D,(HL)
	LD	(POZIV+1),DE
	LD	(POZIV1+1),DE
	JP	OK
POZIV	CALL	0
	LD	HL,(UP)
	CP	H
	JR	Z,TAMO
	CP	L
	JR	Z,THERE
	LD	HL,(LEFT)
	CP	H
	JR	Z,TAM
	CP	L
	JR	Z,OV
	LD	HL,(FIRE)
	CP	L
	JR	Z,OVDJE
	JP	POZIV
TAMO	LD	HL,COORS+1
	LD	A,126
	CP	(HL)
	JP	Z,POZIV
	CALL	MORAS
	LD	HL,COORS+1
	INC	(HL)
	CALL	SPRIT3
	CALL	CONTR
	JP	POZIV
THERE	LD	HL,COORS+1
	LD	A,2
	CP	(HL)
	JP	Z,POZIV
	CALL	MORAS
	LD	HL,COORS+1
	DEC	(HL)
	CALL	SPRIT3
	CALL	CONTR
	JP	POZIV
OV	LD	HL,COORS
	LD	A,2
	CP	(HL)
	JP	Z,POZIV
	CALL	MORAS
	LD	HL,COORS
	DEC	(HL)
	CALL	SPRIT3
	CALL	CONTR
	JP	POZIV
TAM	LD	HL,COORS
	LD	A,231
	CP	(HL)
	JP	Z,POZIV
	CALL	MORAS
	LD	HL,COORS
	INC	(HL)
	CALL	SPRIT3
	CALL	CONTR
	JP	POZIV
OVDJE	CALL	ZVUK2
	CALL	PAUZA
	LD	HL,FLAGS4
	BIT	0,(HL)
	RET	NZ
	LD	A,(GADG)
	AND	A
	JP	Z,POZIV
	ADD	A,A
	LD	HL,GADTAB-2
	LD	D,0
	LD	E,A
	ADD	HL,DE
	LD	E,(HL)
	INC	HL
	LD	D,(HL)
	EX	DE,HL
	JP	(HL)
MORAS	LD	DE,(COORS)
	LD	C,24
	LD	HL,(CUVAJ)
ELPI2	PUSH	DE
	PUSH	HL
	CALL	PIX_AD
	LD	B,4
	POP	DE
ELPI1	LD	A,(DE)
	LD	(HL),A
	INC	HL
	INC	DE
	DJNZ	ELPI1
	POP	HL
	EX	DE,HL
	INC	D
	DEC	C
	JP	NZ,ELPI2
	RET
CONTR	LD	BC,(COORS)
	LD	A,C
	ADD	A,6
	LD	C,A
	CALL	ATTLO1
	LD	A,(DE)
	CP	40
	JR	NZ,PERO
	LD	HL,FLAGS4
	SET	0,(HL)
	RET
PERO	CP	120
	JP	NZ,SEST
	LD	HL,PERO+1
	LD	(HL),7
	LD	HL,FLAGS4
	BIT	6,(HL)
	RET	NZ
	SET	6,(HL)
	LD	HL,(COORS)
	LD	A,L
	ADD	A,10
	LD	L,A
	LD	A,60
	CP	L
	JP	C,SEDAM
	LD	A,3
	LD	HL,#0A04
	CALL	STO
	LD	HL,GADG
	LD	(HL),1
	RET
EDAM	LD	A,116
	CP	L
	JP	C,OSAM
	LD	HL,#0A0B
	CALL	STO
	LD	HL,GADG
	LD	(HL),2
	RET
OSAM	LD	A,180
	CP	L
	JP	C,DEVET
	LD	HL,#0A13
	CALL	STO
	LD	HL,GADG
	LD	(HL),3
	RET
DEVET	LD	HL,#0A1A
	CALL	STO
	LD	HL,GADG
	LD	(HL),4
	RET
SEST	LD	HL,PERO+1
	LD	(HL),120
	LD	HL,FLAGS4
	RES	6,(HL)
	RES	0,(HL)
	LD	HL,GADG
	LD	A,(HL)
	AND	A
	RET	Z
	LD	(HL),0
	ADD	A,A
	LD	DE,BOJTAB-2
	LD	H,0
	LD	L,A
	ADD	HL,DE
	LD	E,(HL)
	INC	HL
	LD	D,(HL)
	EX	DE,HL
	LD	A,3
	LD	(VIS+1),A
	LD	(SIR+1),A
	LD	A,120
	LD	(L2+1),A
	CALL	ATT_FI
	RET
JEDAN	CALL	MORAS
	LD	HL,#8C2E
	LD	(COORS),HL
	CALL	SPRIT3
	LD	HL,FLAGS4
	SET	6,(HL)
	SET	5,(HL)
	RES	4,(HL)
MOVE	CALL	POZIV1
	LD	HL,FLAGS4
	BIT	5,(HL)
	JR	Z,JE1
	LD	A,(SHIP)
	CP	3
	JR	Z,JED1
	INC	A
	LD	(SHIP),A
	JP	MORE
JED1	LD	A,1
	LD	(SHIP),A
	JP	MORE
JE1	LD	A,(SHIP)
	CP	1
	JP	Z,JED2
	DEC	A
	LD	(SHIP),A
	JP	MORE
JED2	LD	A,3
	LD	(SHIP),A
MORE	LD	A,5
	CALL	POSTAV
	LD	HL,#1000
	LD	(NEHTSL),HL
	LD	DE,23296
	CALL	MENIEK+3
	LD	A,(SHIP)
	ADD	A,A
	LD	D,0
	LD	E,A
	LD	HL,OSNTAB-2
	ADD	HL,DE
	LD	E,(HL)
	INC	HL
	LD	D,(HL)
	LD	HL,2048
	ADD	HL,DE
	EX	DE,HL
	PUSH	HL
	LD	HL,#1100
	LD	A,4
	CALL	POSTAV
	CALL	MENIEK+3
	POP	HL
	EX	DE,HL
	LD	(DATA),HL
	LD	DE,1024
	ADD	HL,DE
	LD	(MASK),HL
	LD	HL,(COORS)
	PUSH	HL
	LD	HL,#8008
	LD	(COORS),HL
	SBC	HL,HL
	LD	(CUVAJ),HL
	LD	A,3
	LD	(FOR1+1),A
	LD	A,31
	LD	(FOR2+1),A
	CALL	SPRIT3
	LD	A,2
	LD	(FOR1+1),A
	LD	A,23
	LD	(FOR2+1),A
	POP	HL
	LD	(COORS),HL
	LD	HL,24648
	LD	(DATA),HL
	LD	HL,24576
	LD	(MASK),HL
	LD	HL,50000
	LD	(CUVI,HL
	CALL	MORAS
	CALL	SPRIT3
	JP	MOVE
OK	LD	HL,FLAGS4
	RES	6,(HL)
	RES	5,(HL)
	CALL	MORAS
	LD	HL,#5779
	LD	(COORS),HL
	CALL	SPRIT3
	CALL	SEST
	JP	POZIV
POZIV1	CALL	0
	LD	HL,(UP)
	CP	H
	JR	Z,SIM
	CP	L
	JR	Z,MAT
	LD	HL,(LEFT)
	CP	L
	JR	Z,RIG
	CP	H
	JR	Z,LEF
	LD	HL,(FIRE)
	CP	L
	JR	Z,OVDI
	JP	POZIV1
SIM	LD	HL,COORS+1
	LD	A,168
	CP	(HL)
	JP	Z,POZIV1
	CALL	MORAS
	LD	HL,COORS+1
	INC	(HL)
	CALL	SPRIT3
	CALL	ONTR
	JP	POZIV1
MAT	LD	HL,COORS+1
	LD	A,136
	CP	(HL)
	JP	Z,POZIV1
	CALL	MORAS
	LD	HL,COORS+1
	DEC	(HL)
	CALL	SPRIT3
	CALL	ONTR
	JP	POZIV1
RIG	LD	HL,COORS
	LD	A,40
	CP	(HL)
	JP	Z,POZIV1
	CALL	MORAS
	LD	HL,COORS
	DEC	(HL)
	CALL	SPRIT3
	CALL	ONTR
	JP	POZIV1
LEF	LD	HL,COORS
	LD	A,48
	CP	(HL)
	JP	Z,POZIV1
	CALL	MORAS
	LD	HL,COORS
	INC	(HL)
	CALL	SPRIT3
	CALL	ONTR
	JP	POZIV1
OVDI	CALL	ZVUK2
	CALL	PAUZA
	LD	HL,FLAGS4
	BIT	6,(HL)
	JP	Z,POZIV1
	BIT	4,(HL)
	RET	Z
	POP	HL
	LD	A,(GADG)
	CP	2
	JP	Z,ESPRIT
	CP	4
	JP	Z,PONOVO
	JP	OK
ONTR	LD	BC,(COORS)
	LD	A,C
	ADD	A,6
	LD	C,A
	CALL	ATTLO1
	LD	A,(DE)
	LD	HL,FLAGS4
	CP	56
	JP	Z,ELJAD
	SET	6,(HL)
	CP	60
	JP	NZ,S2
	SET	5,(HL)
	RES	4,(HL)
	RET
S2	CP	57
	JP	NZ,S3
	RES	5,(HL)
	RES	4,(HL)
	RET
S3	CP	58
	JP	NZ,ELJAD
	SET	4,(HL)
	RET
ELJAD	RES	6,(HL)
	RES	4,(HL)
	RET
DVA	CALL	MORAS
	LD	HL,#8C2E
	LD	(COORS),HL
	CALL	SPRIT3
	LD	HL,FLAGS4
	SET	6,(HL)
	SET	5,(HL)
	RES	4,(HL)
VEMO	CALL	POZIV1
	LD	HL,FLAGS4
	BIT	5,(HL)
	JR	Z,DVA2
	LD	A,(LEVEL)
	CP	6
	JR	Z,DVAE
	INC	A
	LD	(LEVEL),A
	JP	PRINTL
DVAE	LD	A,1
	LD	(LEVEL),A
	JP	PRINTL
DVA2	LD	A,(LEVEL)
	CP	1
	JR	Z,DVA3
	DEC	A
	LD	(LEVEL),A
	JP	PRINTL
DVA3	LD	A,6
	LD	(LEVEL),A
PRINTL	LD	HL,#111C
	LD	(NEHTSL),HL
	CALL	BRIS
	LD	HL,#88E0
	LD	(NEXTSL),HL
	LD	A,(LEVEL)
	ADD	A,48
	CALL	RACUN
	CALL	ISPISV
	LD	A,(LEVEL)
	CP	1
	JR	NZ,KOKO
	LD	DE,#131B
	LD	HL,PR5_TX
	CALL	TEXT
	JP	VEMO
KOKO	LD	A,(LEVEL)
	CP	2
	JP	Z,Q1
	CP	6
	JP	NZ,VEMO
Q1	LD	DE,#131B
	LD	HL,COD_TX
	CALL	TEXT
	JP	VEMO
ESPRIT	LD	HL,#1413
	LD	(NEHTSL),HL
	LD	HL,#A098
	LD	(NEXTSL),HL
	XOR	A
	LD	(BRSLOV),A
	LD	A,59
	LD	(ZE23+1),A
	LD	A,56
	LD	(ZEL+1),A
	CALL	ZEL
	LD	A,(LEVEL)
	CP	1
	JP	Z,OK
	ADD	A,A
	LD	D,0
	LD	E,A
	LD	HL,CODTAB-4
	ADD	HL,DE
	DEC	HL
	PUSH	HL
WEY	CALL	#028E
	JP	NZ,WEY
	CALL	#031E
	JP	NC,SAC
	CP	65
	JP	C,SAC
	LD	HL,BRSLOV
	INC	(HL)
	POP	HL
	PUSH	HL
	LD	DE,(BRSLOV)
	LD	D,0
	ADD	HL,DE
	CP	(HL)
	JP	Z,ENDE
	LD	HL,FLAGS4
	SET	7,(HL)
ENDE	EX	AF,AF'
	CALL	BRIS
	CALL	CRV
	EX	AF,AF'
	CALL	RACUN
	CALL	ISPISV
	CALL	PAUZA
	CALL	ZVUK1
	LD	A,(BRSLOV)
	CP	6
	JP	Z,AREY
	CALL	NA
SAC	SCF
	LD	HL,BROJAC
	INC	(HL)
	LD	A,(HL)
	CP	100
	CALL	Z,CHECK
	JP	WEY
AREY	LD	A,1
	LD	(VIS+1),A
	LD	A,19
	LD	(SIR+1),A
	LD	C,63
	LD	B,7
LPP1	LD	HL,#160C
	LD	A,C
	LD	(L2+1),A
	DEC	C
	PUSH	BC
	CALL	PAUZA
	CALL	ATT_FI
	POP	BC
	DJNZ	LPP1
WOLF	CALL	#028E
	LD	A,E
	CP	255
	JP	Z,WOLF
	CP	2
	JR	Z,WILF
	CP	8
	JR	Z,SHELL
	JP	WOLF
WILF	LD	HL,#1413
	LD	DE,PRAZNO
	LD	A,2
	LD	(Z1+1),A
	LD	A,12
	LD	(Z2+1),A
	LD	(Z3+1),A
	CALL	MENIEK+3
	LD	DE,#131B
	LD	HL,PR5_TX
	CALL	TEXT
	CALL	GASI
	LD	HL,FLAGS4
	BIT	7,(HL)
	JP	NZ,MOZE
	LD	A,(LEVEL)
	LD	(SLEVEL),A
	POP	HL
	JP	OK
MOZE	LD	A,(SLEVEL)
	LD	(LEVEL),A
	CALL	SLEVPR
	POP	HL
	JP	OK
SHELL	LD	HL,#1413
	LD	(NEHTSL),HL
	LD	HL,#A098
	LD	(NEXTSL),HL
	LD	HL,#1413
	LD	DE,PRAZNO
	LD	A,2
	LD	(Z1+1),A
	LD	A,12
	LD	(Z2+1),A
	LD	(Z3+1),A
	CALL	MENIEK+3
	CALL	ZEL
	CALL	GASI
	LD	HL,FLAGS4
	RES	7,(HL)
	XOR	A
	LD	(BRSLOV),A
	JP	WEY
GASI	LD	A,1
	LD	(VIS+1),A
	LD	A,19
	LD	(SIR+1),A
	LD	C,56
	LD	B,7
LPP2	LD	HL,#160C
	LD	A,C
	LD	(L2+1),A
	INC	C
	PUSH	BC
	CALL	PAUZA
	CALL	ATT_FI
	POP	BC
	DJNZ	LPP2
	RET
TRI	XOR	A
	LD	(BRSLOV),A
	LD	(COUNT),A
	LD	(KEYBOA),A
	LD	A,4
	LD	(COUNT1),A
	CALL	TESTKE
	LD	DE,#1309
	LD	(NEHTSL),DE
	LD	HL,SP17TX
	CALL	TEXT
	CALL	PAUZA
	CALL	PAUZA
MATCH	CALL	#028E
	LD	A,E
	CP	#FF
	JP	Z,POVEC
	CP	1
	JR	Z,POVEC
	CP	5
	JR	Z,POVEC
	CP	#0E
	JR	Z,POVEC
	LD	HL,UPD
	LD	A,(BRSLOV)
	LD	C,A
	LD	B,0
	ADD	HL,BC
	LD	(HL),E
	AND	A
	JR	Z,SHOT
	LD	B,A
	LD	HL,UPD
BLUE	LD	A,(HL)
	CP	E
	JR	Z,MATCH
	INC	HL
	DJNZ	BLUE
SHOT	LD	A,E
	CP	#18
	JR	Z,PAC
	CP	#27
	JR	Z,GHOST
	CP	#20
	JR	Z,TEH
	CP	#21
	JR	Z,FULL
	CALL	#031E
	JP	KNIGHT
PAC	LD	A,36
	JP	KNIGHT
GHOST	LD	A,35
	JP	KNIGHT
TEH	LD	A,37
	JP	KNIGHT
FULL	LD	A,42
KNIGHT	CALL	RACUN
	EX	DE,HL
	LD	HL,(NEHTSL)
	LD	A,1
	CALL	POSTAV
	CALL	MENIEK+3
	LD	HL,NEHTSL
	INC	(HL)
	INC	(HL)
	INC	(HL)
	CALL	PAUZA
	CALL	ZVUK1
	LD	HL,BRSLOV
	INC	(HL)
	LD	A,5
	CP	(HL)
	JP	NZ,MATCH
	CALL	TESTKE
	JP	PONOVO
POVEC	LD	HL,BROJAC
	INC	(HL)
	LD	A,(HL)
	CP	200
	CALL	Z,CHECK1
	JP	MATCH
CHECK1	LD	DE,CURSTB-1
	LD	HL,COUNT
	LD	A,(HL)
	CP	4
	JP	Z,CHECK2
	INC	(HL)
	LD	A,(HL)
MEDI	LD	H,0
	LD	L,A
	ADD	HL,DE
	LD	A,(HL)
	CALL	RACUN
	EX	DE,HL
	LD	HL,(NEHTSL)
	LD	A,1
	CALL	POSTAV
	CALL	MENIEK+3
	XOR	A
	LD	(BROJAC),A
	RET
CHECK2	LD	HL,COUNT1
	DEC	(HL)
	JP	Z,NOVI
STARI	LD	A,(HL)
	JP	MEDI
NOVI	XOR	A
	LD	HL,COUNT
	LD	(HL),A
	LD	A,4
	LD	(COUNT1),A
	JP	STARI
CETIRI	CALL	MORAS
	LD	HL,#8C2E
	LD	(COORS),HL
	CALL	SPRIT3
	LD	HL,FLAGS4
	SET	6,(HL)
	SET	5,(HL)
	RES	4,(HL)
TITO	CALL	POZIV1
	LD	HL,FLAGS4
	BIT	5,(HL)
	JR	Z,CET1
	LD	A,(KEYBOA)
	CP	3
	JR	Z,CET2
	INC	A
	LD	(KEYBOA),A
	JP	ROUT
CET2	XOR	A
	LD	(KEYBOA),A
	JP	ROUT
CET1	LD	A,(KEYBOA)
	AND	A
	JR	Z,CET3
	DEC	A
	LD	(KEYBOA),A
	JP	ROUT
CET3	LD	A,3
	LD	(KEYBOA),A
ROUT	CALL	TESTKE
	JP	TITO
SLEVPR	LD	HL,#111C
	LD	(NEHTSL),HL
	CALL	BRIS
	LD	A,(SLEVEL)
	ADD	A,48
	CALL	RACUN
	EX	DE,HL
	LD	HL,#88E0
	LD	(NEXTSL),HL
	EX	DE,HL
	CALL	ISPISV
	RET
EYBOAR	LD	HL,UPD
	CALL	PREM
KEYBO	CALL	#028E
	LD	A,E
	CP	#FF
	JP	Z,KEYBO
	RET
KEMP	LD	HL,KEMDOU
	CALL	PREM
	IN	A,(31)
	RET
SINC	LD	HL,SINCDO
	CALL	PREM
RIT	CALL	#028E
	LD	A,E
	CP	#FF
	JP	Z,RIT
	RET
CURYO	LD	HL,CURDOU
	CALL	PREM
SHI	CALL	#028E
	LD	A,E
	CP	#FF
	JP	Z,SHI
	RET
PREM	LD	DE,UP
	LD	B,5
PILJ	LD	A,(HL)
	LD	(DE),A
	INC	DE
	INC	HL
	DJNZ	PILJ
	RET
ATTLO1	SRL	B
	SRL	B
	SRL	B
	SRL	C
	SRL	C
	SRL	C
	CALL	ATT_LO
	RET
GADG	DEFS	1
SHIP	DEFS	1
LEVEL	DEFS	1
SLEVEL	DEFS	1
LEV_TX	DEFM	"LEVEL"
	DEFB	0
PR5_TX	DEFM	"     "
	DEFB	0
COD_TX	DEFM	"CODE?"
	DEFB	0
ZVUK2	CALL	PAUZA
	RET
EMDOU	DEFB	2,8,4,6,16
SINCDO	DEFB	#03,#0B,#13,#1B,#23
CURDOU	DEFB	#03,#0B,#04,#13,#23
UP	DEFS	1
DOW	DEFS	1
LEFT	DEFS	1
RIGHT	DEFS	1
FIRE	DEFS	1
TO	LD	A,3
	LD	(VIS+1),A
	LD	(SIR+1),A
	LD	A,7
	LD	(L2+1),A
	CALL	ATT_FI
	RET
KEYTAB	DEFW	EYBOAR,KEMP,SINC,CURYO
ADTAB	DEFW	JEDAN,DVA,TRI,CETIRI
BOJTAB	DEFW	#0A04,#0A0B,#0A13,#0A1A
OSNTAB	DEFW	35000,38072,41144
CODTAB	DEFW	SAN_CD,SAL_CD,SUZ_CD,TIH_CD,ISM_CD,VAN_CD
CURSTB	DEFB	98,99,100,101
SAN_CD	DEFM	"SANDOZ"
SAL_CD	DEFM	"SALICA"
SUZ_CD	DEFM	"SUZENO"
TIH_CD	DEFM	"TIHAVO"
ISM_CD	DEFM	"ISMOTE"
VAN_CD	DEFM	"VANGOV"
MASK	DEFS	2
SP17TX	DEFM	"                 "
	DEFB	0
ZZZAP	DEFB	0
