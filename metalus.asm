	ORG	26962
MENIEK	LD	DE,23777
	PUSH	HL
	PUSH	DE
	CALL	DEF_LO
	POP	HL
Z1	LD	C,6
BILJA	LD	B,8
BILJ	PUSH	BC
Z2	LD	C,6
	LD	B,0
	LDIR
	INC	D
	LD	A,E
Z3	SUB	6
	LD	E,A
	POP	BC
	DJNZ	BILJ
	DEC	C
	EX	DE,HL
	POP	HL
	RET	Z
	INC	H
	PUSH	HL
	PUSH	DE
	CALL	DEF_LO
	POP	HL
	JP	BILJA
DEF_LO	LD	A,H
	AND	#F8
	ADD	A,#40
	LD	D,A
	LD	A,H
	AND	#07
	RRCA
	RRCA
	RRCA
	ADD	A,L
	LD	E,A
	RET
ATT_FI	LD	C,H
	LD	DE,22528
	LD	H,E
	ADD	HL,HL
	ADD	HL,HL
	ADD	HL,HL
	ADD	HL,HL
	ADD	HL,HL
	LD	B,E
	ADD	HL,BC
	ADD	HL,DE
	LD	D,E
VIS	LD	C,0
SIR	LD	B,0
	LD	A,32
	SUB	B
	LD	E,A
L1	PUSH	BC
L2	LD	(HL),0
	INC	HL
	DJNZ	L2
	ADD	HL,DE
	POP	BC
	DEC	C
	JP	NZ,L1
	RET
SLOEKR	CALL	DEF_LO
	LD	H,B
	LD	L,C
	LD	B,8
GLJ	LD	A,(HL)
	LD	(DE),A
	INC	D
	DEC	E
	INC	HL
	DJNZ	GLJ
	RET
ISPISV	LD	DE,(NEXTSL)
	LD	A,16
	ADD	A,E
	LD	(NEXTSL),A
	LD	C,8
SKR	LD	B,8
ROT	LD	A,(HL)
MASK	AND	128
	JP	NZ,PLOT2
	INC	E
	INC	E
TOR	LD	A,(MASK+1)
	RRCA
	LD	(MASK+1),A
	DJNZ	ROT
	INC	HL
	INC	D
	INC	D
	LD	A,E
	SUB	16
	LD	E,A
	DEC	C
	JP	NZ,SKR
	RET
PLOT2	PUSH	HL
	CALL	PLOT
	INC	E
	INC	E
	POP	HL
	JP	TOR
TAB	LD	HL,#FE00
TLOOP	LD	A,L
	AND	A
	RRA
	SCF
	RRA
	AND	A
	RRA
	XOR	L
	AND	248
	XOR	L
	LD	(HL),A
	INC	L
	LD	A,L
	CP	192
	JR	NZ,TLOOP
	RET
PIX_AD	LD	H,254
	LD	L,D
	LD	H,(HL)
	LD	A,E
	RLCA
	RLCA
	RLCA
	XOR	B
	AND	199
	XOR	B
	RLCA
	RLCA
	LD	L,A
	RET
CLS	PUSH	DE
	CALL	PIX_AD
CLS1	PUSH	BC
	AND	A
	LD	B,32
SEP	RR	(HL)
	INC	HL
	DJNZ	SEP 
	INC	D
	LD	E,#FF
	CALL	PIX_AD
	AND	A
	LD	B,32
CLS2	RL	(HL)
	DEC	HL
	DJNZ	CLS2
	POP	BC
	INC	D
	LD	E,0
	CALL	PIX_AD
	DJNZ	CLS1
	DEC	C
	POP	DE
	JP	NZ,CLS
	RET
CHECK	LD	DE,ADRTAB
	LD	HL,COUNT
	LD	A,(HL)
	CP	5
	JP	C,CHCK2
	INC	(HL)
STZ	ADD	A,A
	LD	H,0
	LD	L,A
	ADD	HL,DE
	LD	E,(HL)
	INC	HL
	LD	D,(HL)
	LD	HL,(NEHTSL)
	CALL	MENIEK
	XOR	A
	LD	(BROJAC),A
	RET
ADRTAB	DEFW	24497,24529,24561
	DEFW	24593,24625
CHCK2	LD	HL,COUNT1
	DEC	(HL)
	JP	Z,ZST
TSZ	LD	A,(HL)
	JP	STZ
ZST	XOR	A
	LD	(COUNT),A
	LD	A,6
	LD	(COUNT1),A
	JP	TSZ
TESTKE	LD	A,(KEYBOA)
	AND	A
	JP	Z,Z80
	CP	1
	JP	Z,Z81
	CP	2
	JP	Z,Z82
	LD	B,59
	CALL	STAVI
	LD	HL,CUR_TX
	LD	DE,#1009
	CALL	TEXT
	RET
Z80	LD	B,56
	CALL	STAVI
	LD	HL,KEY_TX
	LD	DE,#1009
	CALL	TEXT
	LD	A,60
	LD	(L2+1),A
	LD	HL,#1209
	CALL	ATT_FI
	LD	HL,STR_TX
	LD	DE,#1209
	CALL	TEXT
	LD	A,57
	LD	(L2+1),A
	LD	HL,#1309
	CALL	ATT_FI
	LD	HL,UPKEY
	LD	E,(HL)
	CALL	PROV
	LD	BC,#2700
	LD	D,8
	CALL	#0333
	CALL	RACUN
	LD	HL,#1309
	CALL	SLOEKR  
	LD	HL,DOWKEY
	LD	E,(HL)
	CALL	PROV
	LD	D,8
	LD	BC,#2700
	CALL	#0333
	CALL	RACUN
	LD	HL,#130B
	CALL	SLOEKR
	LD	HL,RLEFT
	LD	E,(HL)
	CALL	PROV
	LD	D,8
	LD	BC,#2700
	CALL	#0333
	CALL	RACUN
	LD	HL,#130D
	CALL	SLOEKR
	LD	HL,RRIGHT
	LD	E,(HL)
	CALL	PROV
	LD	D,8
	LD	BC,#2700
	CALL	#0333
	CALL	RACUN
	LD	HL,#130F
CALL	SLOEKR
	LD	HL,FIREKE
	LD	E,(HL)
	CALL	PROV
	LD	D,8
	LD	BC,#2700
	CALL	#0333
	CALL	RACUN
LD	HL,#1311
	CALL	SLOEKR
	RET
PROV	LD	A,E
	CP	27
	JP	Z,CAPS
	CP	18
	JP	Z,SYMB
	CP	20
	JP	Z,SPC
	CP	21
	JP	Z,ENT
	RET
CAPS	LD	E,35
	RET
SYMB	LD	E,36
	RET
SPC	LD	E,37
	RET
ENT	LD	E,97   
	RET
Z81	LD	B,58
	CALL	STAVI
	LD	HL,KEM_TX
	LD	DE,#1009
	CALL	TEXT
	LD	DE,PRAZNO
	LD	HL,#1309
	LD	A,2
	LD	(VIS+1),A
	LD	(Z1+1),A
	LD	A,16
	LD	(Z2+1),A
	LD	(Z3+1),A
	LD	(SIR+1),A
	CALL	MENIEK
	LD	A,56
	LD	(L2+1),A
	CALL	ATT_FI
	RET
Z82	LD	B,60
	CALL	STAVI
	LD	HL,SIN_TX
	LD	DE,#1009
	CALL	TEXT
	RET
GADGET	LD	A,1
	LD	(VIS+1),A
	LD	(SIR+1),A
	LD	A,126
	LD	(L2+1),A
	LD	HL,#1107
	CALL	ATT_FI
	LD	A,124
	LD	(L2+1),A
	LD	HL,#1207
	CALL	ATT_FI
	LD	A,91    
	CALL	RACUN
	LD	HL,#1107
	CALL	SLOEKR
	LD	A,92    
	CALL	RACUN
	LD	HL,#1207
	CALL	SLOEKR
	LD	A,96    
	CALL	RACUN
	LD	HL,#1407
	CALL	SLOEKR
	RET
STAVI	LD	A,1
	LD	(VIS+1),A
	LD	A,15
	LD	(SIR+1),A
	LD	A,B
	LD	(L2+1),A
	LD	HL,#1009
	CALL	ATT_FI
	RET
TEXT	PUSH	DE
	PUSH	HL
	LD	A,(HL)
	AND	A
	RET	Z
	CALL	RACUN
	EX	DE,HL
	LD	B,D
	LD	C,E
	CALL	SLOEKR
	POP	HL
	INC	HL
	POP	DE
	INC	E
	JP	TEXT
PLOT	LD	H,254
	LD	L,D
	LD	H,(HL)
	LD	A,E
	RLCA
	RLCA
	RLCA
	LD	L,A
	AND	56
	XOR	254
	LD	(TLAB+1),A
	LD	A,L
	XOR	D
	AND	199
	XOR	D
	RLCA
	RLCA
	LD	L,A
TLAB	SET	0,(HL)
	RET
SPRIT3	LD	DE,(COORS)
	PUSH	DE
	XOR	A
	CP	E
	RET	C
	ÂƒP	D
	RET	C
	LD	A,127
	CP	D
	RET	C
	LD	A,231
	CP	E
	RET	C
PRAS	CALL	PIH_AD
	LD	B,A
	LD	A,8
	SUB	B
	LD	DE,CUVAJ
	EXX
	EX	AF,AF'
	LD	HL,(DATA)
	LD	DE,(MASK)
	PUSH	HL
SEPR	PUSH	DE
	LD	C,(HL)
	LD	A,(DE)
	LD	HL,#FF00
	EX	AF,AF'
	AND	A
	JR	Z,KRAJ
	LD	B,A
	EX	AF,AF'
ULIJEV	SCF
	RLA
	RLC	H
	RLC	C
	RLC	L
	DJNZ	ULIJEV 
	PUSH	AF
KRAJ	EXX
	LD	A,(HL)
	EXX
	AND	H
	OR	L
	EXX
	LD	(HL),A
	LD	(DE),A
	INC	HL
	INC	DE
	LD	A,(HL)
	EXX
	LD	B,A
	POP	AF
	AND	B
	OR	L
	EXX
	LD	(HL),A
	EXX
	POP	DE
	POP	HL
	INC	DE
	INC	HL
	PUSH	HL
	LD	HL,BRO101
	LD	A,3
	CP	(HL)
	JR	Z,END
	INC	(HL)
	JP	SEPR
END	LD	(HL),1
	LD	HL,BRO102
	LD	A,24
	CP	(HL)
	JR	Z,THE
	INC	(HL)
	EXX
	POP	DE
	PUSH	DE
	JP	PRAS
THE	LD	(HL),1
	POP	DE
	RET
WAITKY	RES	3,(IY+48)
	PUSH	HL
WERY	CALL	#028E
	JP	NZ,NIC
	CALL	#013E
	JP	NC,NIC
	LD	E,A
	LD	C,0
	LD	D,8
	LD	B,#27
	CALL	#0333
	CP	65
	JP	C,NIC
	LD	HL,BRSLOV
	INC	(HL)
	LD	B,A
	LD	A,(HL)
	CP	7
	JP	Z,AREYOU
	POP	HL
	PUSH	HL
	LD	DE,(BRSLOV)
	ADD	HL,DE
	LD	A,B
	CP	(HL)
	JP	NZ,KRAJ
	LD	HL,FLAGS4
	LD	B,A
	LD	A,128
	OR	(HL)
	LD	(HL),A
	LD	A,B
GADAFI	EX	AF,AF'
	CALL	BRIS
	CALL	CRV
	EX	AF,AF'
	CALL	RACUN
	CALL	ISPISV
NIC	SCF
	LD	HL,BROJAC
	INC	(HL)
	LD	A,(HL)
	CP	100
	CALL	Z,CHECK
	JP	WERY
RIS	LD	DE,PRAZNO
	LD	HL,(NEXTSL)
	LD	A,2
	CALL	POSTAV
	CALL	MENIEK
	RET
RV	LD	HL,(NEHTSL)
	LD	A,2
	LD	(VIS+1),A
	LD	(SIR+1),A
ZE	LD	A,2
	LD	(L2+1),A
	CALL	ATT_FI
	RET
ZEL	LD	A,4
	LD	(ZE+1),A
	CALL	CRV
	LD	A,2
	LD	(ZE+1),A
	RET
AREYOU	CALL	TEXT
	LD	A,1
	LD	(VIS+1),A
	LD	A,18
	LD	(SIR+1),A
	LD	C,0
	LD	B,6
LO1	LD	HL,#1607
	LD	A,C
	LD	(L2+1),A
	INC	C
	PUSH	BC
	CALL	PAUZA
	CALL	ATT_FI
	POP	BC
	DJNZ	LO1
YOUARE	CALL	#028E
	LD	A,E
	CP	255
	JP	Z,YOUARE
	CP	2
	POP	HL
	RET	Z
	CP	8
	JP	NZ,YOUARE
	XOR	A
	LD	(BRSLOV),A
	PUSH	HL
	LD	HL,#4028
	LD	(NEXTSL),HL
	LD	HL,#0805
	LD	(NEHTSL),HL
	LD	DE,PRAZNO
	LD	A,2
	LD	(Z1+1),A
	LD	A,12
	LD	(Z2+1),A
	LD	(Z3+1),A
	CALL	MENIEK
	LD	C,5
	LD	B,5
LOOPY	LD	HL,#1607
	LD	A,C
	LD	(L2+1),A
	DEC	C
	PUSH	BC
	CALL	PAUZA
	CALL	ATT_FI
	POP	BC
	DJNZ	LOOPY
	JP	WERY
PAUZA	LD	B,255
	DJNZ	PAUZA
POSTAV	LD	(Z1+1),A
	LD	(Z2+1),A
	LD	(Z3+1),A
	RET
CUVAJ	DEFS	2
DATA	DEFS	2
BRO101	DEFS	1
BRO102	DEFS	1
BRSLOV	DEFS	1
FLAGS4	DEFS	1

UPKEY	DEFS	1
DOWKEY	DEFS	1
RLEFT	DEFS	1
RRIGHT	DEFS	1
FIREKE	DEFS	1
KEM_TX	DEFM	"KEMPSTON JOYSTICK"
	DEFB	0
PRAZNO	EQU	#4000
SIN_TX	DEFM	"SINCLAIR JOYSTICK"
	DEFB	0
COORS	DEFS	2
COUNT	DEFB	1
BROJAC	DEFB	1
KEYBOA	DEFB	1
CUR_TX	DEFM	"CURSOR JOYSTICK"
	DEFB	0
NEXTSL	DEFS	2
NEHTSL	DEFS	2
COUNT1	DEFS	1
STR_TX	DEFB	91,32,92,32,93,32,94,32,95,0
RACUN	LD	BC,#8000
	LD	L,A
	LD	H,0
	ADD	HL,HL
	ADD	HL,HL
	ADD	HL,HL
	ADD	HL,BC
	RET
KEY_TX	DEFM	"KEYBOARD"
	DEFB	0
COME	CALL	ATT_LO
	CALL	BOJ_EK
	RET
ATT_LO	LD	A,B
	SRA	A
	SRA	A
	SRA	A
	ADD	A,#58
	LD	D,A
	LD	A,B
	AND	#7
	RRCA
	RRCA
	RRCA
	ADD	A,C
	LD	E,A
	RET
PIH_AD	LD	H,254
	LD	L,D
	LD	H,(HL)
	LD	A,E
	RLCA
	RLCA
	RLCA
	LD	L,A
	AND	56
	XOR	254
	EX	AF,AF'
	LD	A,L
	XOR	D
	AND	199
	XOR	D
	RLCA
	RLCA
	LD	L,A
	EX	AF,AF'
	RET
	ENT	$
	LD	DE,0
	LD	BC,#60FF
	CALL	CLS
	LD	DE,22529
	LD	HL,22528
	LD	BC,768
	XOR	A
	LD	(HL),A
	LDIR
	LD	DE,#0502
	LD	HL,SEC_TX
	CALL	TEXT
	LD	A,1
	LD	(VIS+1),A
	LD	A,14
	LD	(SIR+1),A
	LD	C,0
	LD	B,7
LOOP	LD	HL,#0502
	LD	A,C
	LD	(L2+1),A
	INC	C
	PUSH	BC
	CALL	ATT_FI
	CALL	PAUZA
	POP	BC
	DJNZ	LOOP
	LD	HL,#0805
	LD	(NEHTSL),HL
	LD	HL,#4018
	LD	(NEXTSL),HL
	LD	HL,ARE_TX
	LD	DE,#1607
	CALL	TEXT
	CALL	WAITKY
	LD	DE,0
	LD	BC,#60FF
	CALL	CLS
	LD	A,(FLAGS4)
	AND	128
	JP	Z,DALJE
	RST	0
DALJE	LD	HL,22528
	LD	DE,22529
	LD	BC,768
	LD	A,56
	LD	(HL),A
	LDIR
	LD	DE,16384
	LD	HL,24657
	LD	BC,2048
	LDIR
	LD	DE,22528
	LD	HL,26706
	LD	BC,256
	LDIR
	LD	A,6
	CALL	POSTAV
	LD	HL,#0902
	CALL	MENIEK
	LD	HL,#0909
	CALL	MENIEK
	LD	HL,#0911
	CALL	MENIEK
	LD	HL,#0918
	CALL	MENIEK
	LD	A,3
	CALL	POSTAV
	LD	HL,#0A03
	LD	DE,24065
	CALL	MENIEK+3
	LD	HL,#0A0B
	LD	DE,24137
	CALL	MENIEK
	LD	HL,#0A13
	LD	DE,24209
	CALL	MENIEK+3
	LD	HL,#0A1A
	LD	DE,24281
	CALL	MENIEK+3
	LD	BC,#0903
	CALL	COME
	LD	BC,#090A
	CALL	COME
	LD	BC,#0912
	CALL	COME
	LD	BC,#0919
	CALL	COME
	CALL	TESTKE
	CALL	GADGET
	RET
BOJ_EK	LD	HL,TABLIC
SZE	LD	C,5
	LD	B,0
	LDIR
	LD	A,E
	ADD	A,27
	LD	E,A
	LD	A,(HL)
	AND	A
	JP	NZ,SZE
	RET
TABLIC	DEFB	56,96,96,96,56
	DEFB	32,120,120,120,32
	DEFB	32 120,120,120,32
	DEFB	32,120,120,120,32
	DEFB	56,96,96,96,56,0
ARE_TX	DEFM	"ARE YOU SURE (Y/N)?"
	DEFB	0
SEC_TX	DEFM	"SECURITY CODE:"
	DEFB	0
